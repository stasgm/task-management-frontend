(this["webpackJsonptask-management-frontend"]=this["webpackJsonptask-management-frontend"]||[]).push([[0],{152:function(e,t,n){},153:function(e,t,n){"use strict";(function(e){var a=n(15),r=n(166),c=n(167),s=n(165),i=(n(328),n(68)),o=n(1),u=function(){var e=i.a.isAuthenticated;return Object(a.i)(Object(c.a)(e))};t.a=Object(r.hot)(e)((function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)(s.a,{}),Object(o.jsx)(u,{})]})}))}).call(this,n(70)(e))},165:function(e,t,n){"use strict";var a=n(337),r=n(339),c=n(340),s=n(171),i=n(338),o=n(172),u=n(15),l=n(26),d=n(68),h=n(1);t.a=function(){var e=Object(u.f)();return Object(h.jsx)(a.a,{sx:{flexGrow:1},children:Object(h.jsx)(r.a,{position:"static",children:Object(h.jsxs)(c.a,{children:[Object(h.jsx)(s.a,{variant:"h6",component:"div",sx:{flexGrow:1},children:Object(h.jsx)(i.a,{component:l.b,to:"/",variant:"h6",color:"#fff",children:"Home"})}),d.a.isAuthenticated?Object(h.jsx)(o.a,{color:"inherit",onClick:function(){return d.a.signout((function(){return e("/login")}))},children:"Log out"}):Object(h.jsx)(o.a,{color:"inherit",onClick:function(){return e("/login")},children:"Log in"})]})})})}},167:function(e,t,n){"use strict";var a,r=n(15),c=n(4),s=n(1),i=Object(c.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.paper,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),o=Object(c.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),u=Object(c.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),l=Object(c.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"}),d=function(){return Object(s.jsx)(i,{children:Object(s.jsx)(o,{children:Object(s.jsx)(u,{children:Object(s.jsx)(l,{children:Object(s.jsx)(r.b,{})})})})})},h=n(0),j=function(){return Object(s.jsx)("div",{className:"container",children:Object(s.jsx)("h1",{children:"Page not found"})})},p=n(14),b=n.n(p),f=n(19),O=n(11),x=n(26),v=n(337),m=n(335),g=n(171),k=n(381),y=n(375),w=n(172),S=n(338),C=n(48),E=n(92),T=n(54),R=function(){var e=Object(r.f)(),t=Object(h.useState)(!1),n=Object(O.a)(t,2),a=n[0],c=n[1],i=Object(h.useState)(!1),o=Object(O.a)(i,2),u=o[0],l=o[1],d=Object(h.useState)(""),j=Object(O.a)(d,2),p=j[0],R=j[1],_=function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!1),R("Loading"),l(!0),t.next=5,T.a.signin(n);case 5:"SIGNUP"===(a=t.sent).type?e("/"):"ERROR"===a.type&&(c(!0),R(a.message)),l(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=Object(E.a)({enableReinitialize:!0,initialValues:{username:"Stas",password:"123456781!aB"},validationSchema:C.a({username:C.b().required("Fill the field"),password:C.b().required("Fill the field")}),onSubmit:function(e){return _(e)}});return Object(s.jsx)(v.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(s.jsxs)(m.a,{maxWidth:"xs",sx:{py:2},children:[Object(s.jsx)(v.a,{sx:{mb:2,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(s.jsx)(g.a,{color:"textPrimary",variant:"h4",children:"Log in"})}),Object(s.jsxs)("form",{onSubmit:N.handleSubmit,children:[Object(s.jsxs)(v.a,{sx:{mb:2,display:"flex",alignItems:"flex-end"},children:[u&&Object(s.jsx)(k.a,{size:20,sx:{mx:2}}),a&&Object(s.jsx)(g.a,{color:"error",variant:"h5",sx:{flexGrow:1,textAlign:"end"},children:p})]}),Object(s.jsx)(y.a,{error:Boolean(N.touched.username&&N.errors.username),required:!0,fullWidth:!0,helperText:N.touched.username&&N.errors.username,label:"Username",margin:"normal",name:"username",onBlur:N.handleBlur,onChange:N.handleChange,value:N.values.username,variant:"outlined"}),Object(s.jsx)(y.a,{error:Boolean(N.touched.password&&N.errors.password),required:!0,label:"Password",fullWidth:!0,helperText:N.touched.password&&N.errors.password,margin:"normal",name:"password",onBlur:N.handleBlur,onChange:N.handleChange,type:"password",value:N.values.password,variant:"outlined"}),Object(s.jsx)(v.a,{sx:{py:2},children:Object(s.jsx)(w.a,{color:"primary",disabled:u||!!N.errors.password||!!N.errors.username,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Sign in"})}),Object(s.jsxs)(g.a,{color:"textSecondary",variant:"body1",children:["Not registred yet?"," ",Object(s.jsx)(S.a,{component:x.b,to:"/register",variant:"h6",children:"Sign up"})]})]})]})})},_=function(){var e=Object(r.f)(),t=Object(h.useState)(!1),n=Object(O.a)(t,2),a=n[0],c=n[1],i=Object(h.useState)(!1),o=Object(O.a)(i,2),u=o[0],l=o[1],d=Object(h.useState)(""),j=Object(O.a)(d,2),p=j[0],R=j[1],_=function(){var t=Object(f.a)(b.a.mark((function t(n){var a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c(!1),R("Loading"),l(!0),t.next=5,T.a.signup(n);case 5:"SIGNUP"===(a=t.sent).type?e("/"):"ERROR"===a.type&&(c(!0),R(a.message)),l(!1);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),N=Object(E.a)({enableReinitialize:!0,initialValues:{username:"Stas",password:"Aa!_123456!"},validationSchema:C.a({username:C.b().required("Fill the field"),password:C.b().required("Fill the field")}),onSubmit:function(e){return _(e)}});return Object(s.jsx)(v.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(s.jsxs)(m.a,{maxWidth:"xs",sx:{py:2},children:[Object(s.jsx)(v.a,{sx:{mb:2,display:"flex",justifyContent:"center",alignItems:"center"},children:Object(s.jsx)(g.a,{color:"textPrimary",variant:"h4",children:"Registration"})}),Object(s.jsxs)("form",{onSubmit:N.handleSubmit,children:[Object(s.jsxs)(v.a,{sx:{mb:2,display:"flex",alignItems:"flex-end"},children:[u&&Object(s.jsx)(k.a,{size:20,sx:{mx:2}}),a&&Object(s.jsx)(g.a,{color:"error",variant:"h5",sx:{flexGrow:1,textAlign:"end"},children:p})]}),Object(s.jsx)(y.a,{error:Boolean(N.touched.username&&N.errors.username),required:!0,fullWidth:!0,helperText:N.touched.username&&N.errors.username,label:"Username",margin:"normal",name:"username",onBlur:N.handleBlur,onChange:N.handleChange,value:N.values.username,variant:"outlined"}),Object(s.jsx)(y.a,{error:Boolean(N.touched.password&&N.errors.password),required:!0,label:"Password",fullWidth:!0,helperText:N.touched.password&&N.errors.password,margin:"normal",name:"password",onBlur:N.handleBlur,onChange:N.handleChange,type:"password",value:N.values.password,variant:"outlined"}),Object(s.jsx)(v.a,{sx:{py:2},children:Object(s.jsx)(w.a,{color:"primary",disabled:u||!!N.errors.password||!!N.errors.username,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Sign up"})}),Object(s.jsxs)(g.a,{color:"textSecondary",variant:"body1",children:["Already registered?"," ",Object(s.jsx)(S.a,{component:x.b,to:"/login",variant:"h6",children:"Sign in"})]})]})]})})},N=n(16),A=n(17),P=n(23),B=n(24),I=n(164),U=n.n(I),D=function(e){Object(P.a)(n,e);var t=Object(B.a)(n);function n(){return Object(N.a)(this,n),t.apply(this,arguments)}return Object(A.a)(n,[{key:"fetchTasks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=e.status,a=e.search;(null===n||void 0===n?void 0:n.length)&&(t.status=n),(null===a||void 0===a?void 0:a.length)&&(t.search=a);var r=U.a.stringify(t);return this.get("tasks"+(r?"?".concat(r):""))}},{key:"getById",value:function(e){return this.get("tasks/".concat(e))}},{key:"deleteById",value:function(){var e=Object(f.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.delete("tasks/".concat(t));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateById",value:function(e,t){return this.patch("tasks/".concat(e),t)}},{key:"createTask",value:function(e){return this.post("tasks",e)}}]),n}(n(85).a),L=new D;!function(e){e.OPEN="OPEN",e.IN_PROGRESS="IN_PROGRESS",e.DONE="DONE"}(a||(a={}));n(152);var W=function(){var e=Object(r.f)(),t=Object(r.g)(),n=Object(h.useState)(""),c=Object(O.a)(n,2),i=c[0],o=c[1],u=Object(h.useState)(a.OPEN),l=Object(O.a)(u,2),d=l[0],j=l[1],p=Object(h.useState)(""),x=Object(O.a)(p,2),v=x[0],m=x[1],g=Object(h.useState)(""),k=Object(O.a)(g,2),S=k[0],C=k[1];Object(h.useEffect)((function(){function e(){return e=Object(f.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.getById(t);case 3:(n=e.sent).success&&(o(n.data.id),j(n.data.status),m(n.data.title),C(n.data.description)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),e.apply(this,arguments)}t.id&&function(t){e.apply(this,arguments)}(t.id)}),[t]);var E=function(){return e("/")},T=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.createTask({title:v,description:S});case 3:e.sent&&(_(),E()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("Error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(f.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,t={id:i,title:v,description:S,status:d},e.next=6,L.updateById(i,t);case 6:(n=e.sent)?(console.log("Task updated",n),_(),E()):console.log("Task is not updated",n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("Error: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),_=function(){m(""),C("")};return Object(s.jsxs)("div",{className:"edit-block",children:[Object(s.jsx)(y.a,{placeholder:"Title",variant:"outlined",className:"text-field",value:v,onChange:function(e){return m(e.target.value)}}),Object(s.jsx)(y.a,{placeholder:"Description",variant:"outlined",className:"text-field",value:S,onChange:function(e){return C(e.target.value)}}),Object(s.jsxs)("div",{className:"buttons",children:[Object(s.jsxs)(w.a,{color:"primary",size:"small",variant:"contained",onClick:i?R:T,className:"button",children:[i?"Update":"Add new"," task"]}),Object(s.jsx)(w.a,{color:"secondary",size:"small",variant:"contained",onClick:_,className:"button",children:"Clear"}),Object(s.jsx)(w.a,{color:"secondary",size:"small",variant:"contained",onClick:E,className:"button",children:"Close"})]})]})},z=n(389),G=n(382),H=n(390),q=n(391),F=n(384),V=n(385),K=n(392),J=n(383),M=n(372),Y=n(373),Q=n(88),X=function(e){var t=e.data,n=e.onTaskDelete,c=(e.onTaskUpdate,Object(r.f)()),i=function(){var e=Object(f.a)(b.a.mark((function e(a){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(t.id);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=Object(h.useCallback)((function(e){return c(e)}),[c]),u=function(e){var t=e.id;return Object(s.jsx)(J.a,{onClick:function(){return o(t)},children:Object(s.jsx)(M.a,{})})},l=function(e){var t=e.id;return Object(s.jsx)(J.a,{onClick:function(){return i(t)},children:Object(s.jsx)(Y.a,{color:"action"})})};return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)(F.a,{style:{color:function(e){var t="";switch(e){case a.OPEN:t="gray";break;case a.IN_PROGRESS:t="orange";break;case a.DONE:t="green";break;default:t=""}return t}(t.status)},sx:{"&:last-child td, &:last-child th":{border:0},"&:nth-of-type(odd)":{backgroundColor:Q.a.palette.action.hover}},children:[Object(s.jsx)(V.a,{children:t.title}),Object(s.jsx)(V.a,{children:t.description}),Object(s.jsx)(V.a,{children:function(e){var t="";switch(e){case a.OPEN:t="Created";break;case a.IN_PROGRESS:t="In Progress";break;case a.DONE:t="Done";break;default:t=""}return t}(t.status)}),Object(s.jsxs)(V.a,{children:[Object(s.jsx)(u,{id:t.id}),Object(s.jsx)(l,{id:t.id})]})]},t.id)})},Z=n(380),$=n(374),ee=n(386),te=n(387),ne=n(388),ae=function(e){var t=e.title,n=e.children,a=e.open,r=e.setOpen,c=e.onConfirm;return Object(s.jsxs)(Z.a,{open:a,onClose:function(){return r(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(s.jsx)($.a,{id:"confirm-dialog",children:t}),Object(s.jsx)(ee.a,{children:Object(s.jsx)(te.a,{id:"alert-dialog-description",children:n})}),Object(s.jsxs)(ne.a,{children:[Object(s.jsx)(w.a,{variant:"contained",onClick:function(){return r(!1)},color:"secondary",children:"No"}),Object(s.jsx)(w.a,{variant:"contained",onClick:function(){r(!1),c()},color:"primary",children:"Yes"})]})]})},re=function(){var e=Object(r.f)(),t=Object(h.useState)([]),n=Object(O.a)(t,2),a=n[0],c=n[1],i=Object(h.useState)(!1),o=Object(O.a)(i,2),u=o[0],l=o[1],d=Object(h.useState)(""),j=Object(O.a)(d,2),p=j[0],x=j[1];Object(h.useEffect)((function(){function e(){return(e=Object(f.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.fetchTasks();case 3:(t=e.sent).success&&c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}a.length||function(){e.apply(this,arguments)}()}),[]);var v=function(){var e=Object(f.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("delete an item: ",p),e.prev=1,e.next=4,L.deleteById(p);case 4:c((function(e){return e.filter((function(e){return e.id!==p}))})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("Error: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}(),m=Object(h.useCallback)((function(){return e("new")}),[e]),g=Object(h.useCallback)((function(t){return e(t)}),[e]),k=function(e){x(e),l(!0)};return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{className:"edit-block",children:Object(s.jsxs)("div",{className:"buttons",children:[Object(s.jsx)(w.a,{color:"primary",size:"small",variant:"contained",onClick:m,className:"button",children:"Add new task"}),Object(s.jsx)(w.a,{color:"secondary",size:"small",variant:"contained",onClick:function(){return console.log("delete all items")},className:"button",children:"Delete All"})]})}),Object(s.jsx)(z.a,{component:G.a,children:Object(s.jsxs)(H.a,{sx:{minWidth:800},"aria-label":"Tasks",children:[Object(s.jsx)(q.a,{children:Object(s.jsxs)(F.a,{children:[Object(s.jsx)(V.a,{width:"150px",children:"Title"}),Object(s.jsx)(V.a,{children:"Description"}),Object(s.jsx)(V.a,{width:"30px",children:"Status"}),Object(s.jsx)(V.a,{width:"100px",align:"center",children:"Actions"})]})}),Object(s.jsx)(K.a,{children:a.slice(0,10).map((function(e){return Object(s.jsx)(X,{data:e,onTaskDelete:k,onTaskUpdate:function(){return g(e.id)}},e.id)}))})]})}),Object(s.jsx)(ae,{title:"Delete task?",open:u,setOpen:l,onConfirm:v,children:"Are you sure you want to delete this task?"})]})},ce=[{path:"/",element:Object(s.jsx)(re,{})},{path:"/new",element:Object(s.jsx)(W,{}),index:!0},{path:":id",element:Object(s.jsx)(W,{})}];function se(){return Object(r.i)(ce)}var ie=function(){return[{path:"/",element:Object(s.jsx)(d,{}),children:[{path:"/",element:Object(s.jsx)(r.a,{to:"/app/tasks"}),index:!0},{path:"/tasks/*",element:Object(s.jsx)(se,{}),index:!0},{path:"*",element:Object(s.jsx)(j,{})}]}]},oe=function(){return Object(r.i)(ie())};t.a=function(e){return[{path:"/",element:e?Object(s.jsx)(r.a,{to:"/app"}):Object(s.jsx)(d,{}),children:[{path:"/login",element:Object(s.jsx)(R,{})},{path:"/register",element:Object(s.jsx)(_,{})},{path:"404",element:Object(s.jsx)(j,{})},{path:"/",element:Object(s.jsx)(r.a,{to:"login"})},{path:"/admin",element:Object(s.jsx)(r.a,{to:"login"})}]},{path:"/app/*",element:e?Object(s.jsx)(oe,{}):Object(s.jsx)(r.a,{to:"/login"})},{path:"*",element:Object(s.jsx)(j,{})}]}},173:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(45),s=n.n(c),i=n(334),o=n(335),u=n(26),l=n(153),d=n(88),h=(n(330),n(1));s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(i.a,{theme:d.a,children:Object(h.jsx)(u.a,{children:Object(h.jsx)(o.a,{maxWidth:"md",children:Object(h.jsx)(l.a,{})})})})}),document.getElementById("root"))},328:function(e,t,n){},330:function(e,t,n){},54:function(e,t,n){"use strict";var a=n(14),r=n.n(a),c=n(19),s=n(16),i=n(17),o=n(23),u=n(24),l=function(e){Object(o.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"signin",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.post("auth/signin",t);case 3:if((n=e.sent).success){e.next=6;break}return e.abrupt("return",{type:"ERROR",message:"unknown error"});case 6:return a=n.data.access_token,this.saveToken(a),e.abrupt("return",{type:"SIGNUP"});case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",{type:"ERROR",message:e.t0||"\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"});case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signup",value:function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.post("auth/signup",t);case 3:if((n=e.sent).success){e.next=7;break}return a=n.data.error||"unknown error",e.abrupt("return",{type:"ERROR",message:a});case 7:return c=n.data.access_token,this.saveToken(c),e.abrupt("return",{type:"SIGNUP"});case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",{type:"ERROR",message:e.t0||"\u043e\u0448\u0438\u0431\u043a\u0430 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"});case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signout",value:function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.removeToken();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(85).a);t.a=new l},68:function(e,t,n){"use strict";var a=n(14),r=n.n(a),c=n(19),s=n(54),i={_isAuthenticated:!1,get isAuthenticated(){return!!s.a.accessToken},signout:function(e){return Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.signout();case 2:t.sent,i._isAuthenticated=!1,setTimeout(e,100);case 5:case"end":return t.stop()}}),t)})))()}};t.a=i},85:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a,r,c=n(14),s=n.n(c),i=n(40),o=n(19),u=n(16),l=n(17),d=n(69),h=n.n(d),j=(null===(a=Object({NODE_ENV:"production",PUBLIC_URL:"https://stasgm.github.io/task-management-frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"https://dev-task-management-app-back.herokuapp.com"}).REACT_APP_ENV)||void 0===a?void 0:a.trim())||"local-dev",p="prod"===j?"https://task-management-app-back.herokuapp.com":"dev"===j?"https://dev-task-management-app-back.herokuapp.com/api/v1":"http://localhost:3000/api/v1",b=null===(r="https://dev-task-management-app-back.herokuapp.com")?void 0:r.trim();console.log("REACT_APP_BASE_URL",b),console.log("REACT_APP_ENV",j),console.log("serverUrl",p),console.log("baseUrl",b||p);var f=function(){function e(){Object(u.a)(this,e),this.BASE_URL=b||p,this._accessToken=null}return Object(l.a)(e,[{key:"get",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,a,r=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.prev=1,e.next=4,h.a.get("".concat(this.BASE_URL,"/").concat(t),Object(i.a)(Object(i.a)({},n),this.getCommonOptions()));case 4:return a=e.sent,e.abrupt("return",{success:!0,data:a.data});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",this.handleHttpError(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,a,r,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=c.length>2&&void 0!==c[2]?c[2]:{},e.prev=2,e.next=5,h.a.post("".concat(this.BASE_URL,"/").concat(t),n,Object(i.a)(Object(i.a)({},a),this.getCommonOptions()));case 5:return r=e.sent,e.abrupt("return",{success:!0,data:r.data});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",this.handleHttpError(e.t0));case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,a,r=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.prev=1,e.next=4,h.a.delete("".concat(this.BASE_URL,"/").concat(t),Object(i.a)(Object(i.a)({},n),this.getCommonOptions()));case 4:return a=e.sent,e.abrupt("return",{success:!0,data:a.data});case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",this.handleHttpError(e.t0));case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"patch",value:function(){var e=Object(o.a)(s.a.mark((function e(t){var n,a,r,c=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:{},a=c.length>2&&void 0!==c[2]?c[2]:{},e.prev=2,e.next=5,h.a.patch("".concat(this.BASE_URL,"/").concat(t),n,Object(i.a)(Object(i.a)({},a),this.getCommonOptions()));case 5:return r=e.sent,e.abrupt("return",{success:!0,data:r.data});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",this.handleHttpError(e.t0));case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()},{key:"handleHttpError",value:function(e){var t,n,a=(null===(t=e.response)||void 0===t?void 0:t.data).statusCode;if(401===a)return this.handle401();if(400===a)return{success:!1,data:null===(n=e.response)||void 0===n?void 0:n.data};throw e}},{key:"handle401",value:function(){return window.location.replace("/login"),{success:!1,data:{error:"No permissions"}}}},{key:"getCommonOptions",value:function(){var e=this.loadToken();return{headers:{Authorization:"Bearer ".concat(e)}}}},{key:"accessToken",get:function(){return this._accessToken?this._accessToken:this.loadToken()}},{key:"saveToken",value:function(e){return this._accessToken=e,localStorage.setItem("accessToken",e)}},{key:"loadToken",value:function(){var e=localStorage.getItem("accessToken");return this._accessToken=e,e}},{key:"removeToken",value:function(){localStorage.removeItem("accessToken")}}]),e}()},88:function(e,t,n){"use strict";var a=n(113),r=n(336),c=Object(a.a)({palette:{},shape:{borderRadius:5}});c=Object(r.a)(c),t.a=c}},[[173,1,2]]]);
//# sourceMappingURL=main.0aad7f15.chunk.js.map